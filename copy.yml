---
- name: Infrastructure Deployment
  hosts: localhost
  collections:
   - cloud.terraform
 

  tasks:

    - name: List bucket content
      aws_s3:
        bucket: terraformfile9088
        object: "/terraform"
        dest: tmp
        mode: get


    - name: Run expect to wait for a successful PXE boot via out-of-band CIMC
      ansible.builtin.shell: |
        cd /tmp
        ls
      register: hostname_output
      
    - name: show hostname
      debug:
        var: hostname_output.stdout_lines
